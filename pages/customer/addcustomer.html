<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M A M Billing</title>
    <link rel="stylesheet" href="../../assets/css/customer/addcustomer.css">
    <link rel="stylesheet" href="../../assets/css/normalize.css">
    <script src="https://cdn.jsdelivr.net/npm/uuid@8.3.2/dist/umd/uuidv4.min.js"></script>
</head>

<body>
    <header>
        <div>
            <div class="nav">
                <div class="logo">
                    <img src="../../assets/Imges/M_A_M.png   " alt="Logo pic" />
                </div>
                <div class="list">
                    <ul class="link">
                        <li class="navlist"><a class="navlist" href="../customer/customer.html"> &#x2190; Back to
                                Customer List</a></li>
                    </ul>
                </div>
            </div>
    </header>
    <main>
        <div class="one">
            <form  id="signup-form" onsubmit="(event)">
                <h2>Add New Customer</h2>
                <div class="content">
                    <label class="forms">Customer Name</label>
                    <input class="lists" type="text" id="customer_name" placeholder="Enter Customer Name" pattern="[a-zA-Z]+" title="Use Letters to Add Customer Name.Don't use space or any special Characters" required />
                </div>
                <div class="content">
                    <label class="forms">Phone Number</label>
                    <input class="lists" type="tel" id="customer_phone" placeholder="Enter Mobile Number" maxlength="10" pattern="^[6789]\d{9,9}$" title="Use Numbers begin with 7,8,9 and must Enter 10 Characters" required />
                </div>
                <div class="content">
                    <label class="forms">ID Number</label>
                    <input class="lists" type="text" id="customer_id" placeholder="Enter ID Number" required />
                </div>
                <div class="content">
                    <label class="forms">E-Mail Address (optional)</label>
                    <input class="lists" type="email" id="customer_email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"  title="Please enter correct Email" placeholder="Enter Customer E-Mail" />
                </div>
                <div class="content">
                    <label class="forms">Customer Address(optional)</label>
                    <input class="lists" type="text" id="customer_address" placeholder="Enter Customer Adress"  />
                </div>
                <button class="button" type="submit">Save<span>&#8594;</span></button>
            </form>
        </div>
    </main>
    <script>
        let form = document.getElementById("signup-form");
         let customer_name = document.getElementById("customer_name");
         let customer_phone = document.getElementById("customer_phone");
         let customer_id = document.getElementById("customer_id");
         let customer_email = document.getElementById("customer_email");
         let customer_address = document.getElementById("customer_address");

         let uuid = uuidv4();
 
 
      const customerDetails = JSON.parse(localStorage.getItem("customerDetails")) || [];
 
 
 form.addEventListener("submit", function(event) {
   event.preventDefault();
   
 
 
 
  if (customerDetails.some(record => record.customer_phone === customer_phone.value)) {
     alert("Customer Phone Number is already exists! ");
     return;
   }

 else{
 
   let newCustomer = {
    customer_name: customer_name.value,
    customer_phone: customer_phone.value,
    customer_id: customer_id.value,
     customer_email: customer_email.value,
     customer_address: customer_address.value,
      unique :uuid     
   };
 
 
 
   customerDetails.push(newCustomer);
   localStorage.setItem("customerDetails", JSON.stringify(customerDetails));
   localStorage.setItem("customer_phone", customer_phone.value);
   alert("Customer Sucessfully Created");
   window.location.href="./customer.html"
   event.preventDefault();
   
 }});
 
 
         
 
 
 
 
     </script>



</body>

</html>