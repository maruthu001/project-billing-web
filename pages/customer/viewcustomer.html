<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M A M Billing</title>
    <link rel="stylesheet" href="../../assets/css/customer/viewcustomer.css">
    <link rel="stylesheet" href="../../assets/css/normalize.css">
</head>

<body>
    <header>
        <div>
            <div class="nav">
                <div class="logo">
                    <img src="../../assets/Imges/M_A_M.png    " alt="Logo pic" />
                </div>
            </div>
        </div>
    </header>
    <main>
        <div class="one">
            <form onsubmit="update(event)"  >
                <h2>View Customer Details</h2>
                <div class="parts">

                    <div class="content">
                        <label class="forms">Customer Name</label>
                        <input class="lists" type="text"  id="customer_name" pattern="[a-zA-Z]+" title="Use Letters to Add Customer Name.Don't use space or any special Characters" required />

                    </div>
                    <div class="content">
                        <label class="forms">Phone Number</label>
                        <input class="lists" type="tel" id="customer_phone"  pattern="^[789]\d{9,9}$" maxlength="10" title="Use Numbers begin with 7,8,9 and must Enter 10 Characters"  required />
                    </div>
                    <div class="content">
                        <label class="forms">Customer ID</label>
                        <input class="lists" type="text" id="customer_id" required />
                    </div>
                    <div class="content">
                        <label class="forms">E-Mail Address (optional)</label>
                        <input class="lists" type="email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"  title="Please enter correct Email" id="customer_email"  />
                    </div>
                    
                    <div class="content">
                        <label class="forms">Customer Address(optional)</label>
                        <input class="lists" type="text" id="customer_address"   />
                    </div>
                    


                </div>
                <div class="content1">
                    <button class="button"type="button" onclick="backbutton()"><span>&#10094;</span>Back</button>
                    <button class="button" type="submit">Save<span>&#10095;</span></button>
                </div>

            </form>
        </div>
      

    </main>
    <script>


        let customerDetails = JSON.parse(localStorage.getItem("customerDetails"));
        // let stock_name = localStorage.getItem("stock_name")

////  check
        // const url = window.location.href;
const params = new URLSearchParams(window.location.search);
const myParamValue = params.get('customer_id');


        function findDetail(e) {
            return e.customer_id === myParamValue;
        }
        let customer_records = customerDetails.find(findDetail);



   
        



        function update(e) {
            event.preventDefault()
            //                  // getting the updated data from the input field
            // const shop_name = document.getElementById("shop_name").value;
            // const licence_number = document.getElementById("licence_number").value;
            // const phone_number = document.getElementById("phone_number").value;
            let customer_name = document.getElementById("customer_name").value;
            let customer_id = document.getElementById("customer_id").value;
            let customer_email = document.getElementById("customer_email").value;
            let customer_phone = document.getElementById("customer_phone").value;
            let customer_address = document.getElementById("customer_address").value;
           

            // paste the updated data to the correct object


            customer_records["customer_name"] = customer_name;
            customer_records["customer_id"] = customer_id;
            customer_records["customer_email"] = customer_email;
            customer_records["customer_phone"] = customer_phone;
            customer_records["customer_address"] = customer_address;
           
              





/// checking

            // again paste it to the
            localStorage.setItem("customerDetails", JSON.stringify(customerDetails));
            alert("Customer Details Successfully Updated")
            window.location.href = "./customer.html" 
            
            if(customer_address.value.length ===0 ){
            customer_email.setAttribute("value","Please Enter Customer Email");
        }
          

        }


        // const sumbit = document.getElementById("save_data");
        // sumbit.addEventListener("click", update(event));

        //   const back =document.querySelector(".button_1");
        //   back.addEventListener("click",backbutton);




        function backbutton() {
            alert("Are You Sure Discard Changes!")
            window.location.href = "./customer.html"
        }

       
        document.getElementById("customer_name").value = customer_records["customer_name"];
        document.getElementById("customer_id").value = customer_records["customer_id"]
        document.getElementById("customer_email").value = customer_records["customer_email"];
        document.getElementById("customer_phone").value = customer_records["customer_phone"];
        document.getElementById("customer_address").value = customer_records["customer_address"];
      
    














    </script>






</body>

</html>